<%- css('css/comments') %>
<%- diversity_data('comments', comments_config()) %>
<%- js('js/diversity') %>
<div class = "comment-wrap">
    <div class = "comment-inner">
        <% if (theme.view_injects.comment.length === 1) { %>
            <% const inject_item = theme.view_injects.comment[0] %>
                <% if (inject_item.locals.showLoading) { %>
                    <%- partial('_partial/loading', {showLoading : inject_item.locals.showLoading, id : 'loading-' + inject_item.locals.configKey, text : 'Loading comments...'}) %>
                <% } %>
            <%- partial(inject_item.layout, inject_item.locals, inject_item.options) %>
        <% } else if (theme.view_injects.comment.length > 1) { %>
            <% if (theme.comments.style == 'tabs') { %>
                <div class="tabbable">
                    <ul id="comment-nav-tab" class="nav nav-tabs">
                        <% for (var i = 0; i < theme.view_injects.comment.length; i++) { %>
                            <% const inject_item = theme.view_injects.comment[i] %>
                            <li class="<%= inject_item.locals.active %>">
                                <a data-toggle="tab" href="#comment-<%= inject_item.locals.class %>" data-comment="<%= inject_item.locals.class %>">
                                    <%= inject_item.locals.text %>
                                </a>
                            </li>
                        <% } %>
                    </ul>

                    <div class="tab-content">
                        <% for (var i = 0; i < theme.view_injects.comment.length; i++) { %>
                            <% const inject_item = theme.view_injects.comment[i] %>
                            <div id="comment-<%= inject_item.locals.class %>" 
                                class="tab-pane <%= inject_item.locals.active %>">
                                <%- partial('_partial/loading', {showLoading : inject_item.locals.showLoading, id : 'loading-' + inject_item.locals.configKey, text : 'Loading comments...'}) %>
                                <%- partial(inject_item.layout, inject_item.locals, inject_item.options) %>
                            </div>
                        <% } %>
                    </div>
                </div>
            <% } %>
            <%- js('js/tab') %>
        <% } %>
    </div>
</div>

<%- diversity_injects('pageEnd') %>